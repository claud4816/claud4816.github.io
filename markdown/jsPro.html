<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>js 高级 | 个人文档</title>
    <meta name="generator" content="VuePress 1.4.1">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="前端技术及相关知识点整理归纳">
    <link rel="preload" href="/assets/css/0.styles.a7881da7.css" as="style"><link rel="preload" href="/assets/js/app.85a124d9.js" as="script"><link rel="preload" href="/assets/js/4.5f39a6eb.js" as="script"><link rel="preload" href="/assets/js/7.898d1706.js" as="script"><link rel="prefetch" href="/assets/js/10.5f8a85f9.js"><link rel="prefetch" href="/assets/js/11.6759e947.js"><link rel="prefetch" href="/assets/js/12.458628c1.js"><link rel="prefetch" href="/assets/js/13.99044445.js"><link rel="prefetch" href="/assets/js/14.b42db835.js"><link rel="prefetch" href="/assets/js/15.a4d51a7d.js"><link rel="prefetch" href="/assets/js/16.eda4d2a3.js"><link rel="prefetch" href="/assets/js/17.c5953c8a.js"><link rel="prefetch" href="/assets/js/18.a28f816b.js"><link rel="prefetch" href="/assets/js/19.0c359756.js"><link rel="prefetch" href="/assets/js/2.12ea8054.js"><link rel="prefetch" href="/assets/js/20.16a174d3.js"><link rel="prefetch" href="/assets/js/21.fdbdcf3d.js"><link rel="prefetch" href="/assets/js/22.83bed77f.js"><link rel="prefetch" href="/assets/js/23.cd127046.js"><link rel="prefetch" href="/assets/js/24.77432a59.js"><link rel="prefetch" href="/assets/js/3.3c007b1e.js"><link rel="prefetch" href="/assets/js/5.a0d48ae1.js"><link rel="prefetch" href="/assets/js/6.1e171dfc.js"><link rel="prefetch" href="/assets/js/8.cce43762.js"><link rel="prefetch" href="/assets/js/9.d19a435f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.a7881da7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">个人文档</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Note" class="dropdown-title"><span class="title">Note</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/markdown/jsBase.html" class="nav-link">
  JS基础知识
</a></li><li class="dropdown-item"><!----> <a href="/markdown/webAPI.html" class="nav-link">
  JS面向浏览器
</a></li><li class="dropdown-item"><!----> <a href="/markdown/jsPro.html" class="nav-link router-link-exact-active router-link-active">
  JS进阶知识
</a></li><li class="dropdown-item"><!----> <a href="/markdown/ECMAScript6.html" class="nav-link">
  JSES6
</a></li><li class="dropdown-item"><!----> <a href="/markdown/jQuery.html" class="nav-link">
  jQuary
</a></li><li class="dropdown-item"><!----> <a href="/markdown/ajax.html" class="nav-link">
  Ajax通信
</a></li><li class="dropdown-item"><!----> <a href="/markdown/nodeJS.html" class="nav-link">
  JSnode
</a></li><li class="dropdown-item"><!----> <a href="/markdown/vue.html" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/markdown/wx.html" class="nav-link">
  小程序
</a></li><li class="dropdown-item"><!----> <a href="/markdown/react.html" class="nav-link">
  React入门
</a></li><li class="dropdown-item"><!----> <a href="/markdown/npm.html" class="nav-link">
  npm使用
</a></li><li class="dropdown-item"><!----> <a href="/markdown/git.html" class="nav-link">
  git使用
</a></li><li class="dropdown-item"><!----> <a href="/markdown/mysql.html" class="nav-link">
  mysql了解
</a></li><li class="dropdown-item"><!----> <a href="/markdown/stylus.html" class="nav-link">
  stylus
</a></li></ul></div></div><div class="nav-item"><a href="/custom/user.html" class="nav-link">
  自定义页面
</a></div><div class="nav-item"><a href="https://www.baidu.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  External
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/git@github.com:claud4816/claud4816.github.io.git" target="_blank" rel="noopener noreferrer" class="repo-link">
    查看源码
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Note" class="dropdown-title"><span class="title">Note</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/markdown/jsBase.html" class="nav-link">
  JS基础知识
</a></li><li class="dropdown-item"><!----> <a href="/markdown/webAPI.html" class="nav-link">
  JS面向浏览器
</a></li><li class="dropdown-item"><!----> <a href="/markdown/jsPro.html" class="nav-link router-link-exact-active router-link-active">
  JS进阶知识
</a></li><li class="dropdown-item"><!----> <a href="/markdown/ECMAScript6.html" class="nav-link">
  JSES6
</a></li><li class="dropdown-item"><!----> <a href="/markdown/jQuery.html" class="nav-link">
  jQuary
</a></li><li class="dropdown-item"><!----> <a href="/markdown/ajax.html" class="nav-link">
  Ajax通信
</a></li><li class="dropdown-item"><!----> <a href="/markdown/nodeJS.html" class="nav-link">
  JSnode
</a></li><li class="dropdown-item"><!----> <a href="/markdown/vue.html" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/markdown/wx.html" class="nav-link">
  小程序
</a></li><li class="dropdown-item"><!----> <a href="/markdown/react.html" class="nav-link">
  React入门
</a></li><li class="dropdown-item"><!----> <a href="/markdown/npm.html" class="nav-link">
  npm使用
</a></li><li class="dropdown-item"><!----> <a href="/markdown/git.html" class="nav-link">
  git使用
</a></li><li class="dropdown-item"><!----> <a href="/markdown/mysql.html" class="nav-link">
  mysql了解
</a></li><li class="dropdown-item"><!----> <a href="/markdown/stylus.html" class="nav-link">
  stylus
</a></li></ul></div></div><div class="nav-item"><a href="/custom/user.html" class="nav-link">
  自定义页面
</a></div><div class="nav-item"><a href="https://www.baidu.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  External
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/git@github.com:claud4816/claud4816.github.io.git" target="_blank" rel="noopener noreferrer" class="repo-link">
    查看源码
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>js 高级</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/markdown/jsPro.html#_1-面向对象理论部分" class="sidebar-link">1 面向对象理论部分</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/markdown/jsPro.html#_1-1-面向过程和面向对象" class="sidebar-link">1.1 面向过程和面向对象</a></li></ul></li><li><a href="/markdown/jsPro.html#_2-对象" class="sidebar-link">2 对象</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/markdown/jsPro.html#_2-1-自定义构造函数创建对象" class="sidebar-link">2.1 自定义构造函数创建对象</a></li><li class="sidebar-sub-header"><a href="/markdown/jsPro.html#_2-2-构造函数和普通函数的区别" class="sidebar-link">2.2 构造函数和普通函数的区别</a></li><li class="sidebar-sub-header"><a href="/markdown/jsPro.html#_2-4-创建对象的案例" class="sidebar-link">2.4 创建对象的案例</a></li></ul></li><li><a href="/markdown/jsPro.html#_3-原型" class="sidebar-link">3 原型</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/markdown/jsPro.html#_3-1-为什么要学习原型" class="sidebar-link">3.1 为什么要学习原型</a></li><li class="sidebar-sub-header"><a href="/markdown/jsPro.html#_3-2-获取和使用原型" class="sidebar-link">3.2 获取和使用原型</a></li><li class="sidebar-sub-header"><a href="/markdown/jsPro.html#_3-3-原型的作用" class="sidebar-link">3.3 原型的作用</a></li><li class="sidebar-sub-header"><a href="/markdown/jsPro.html#_3-4-实例对象、原型、构造函数、原型链图解" class="sidebar-link">3.4 实例对象、原型、构造函数、原型链图解</a></li><li class="sidebar-sub-header"><a href="/markdown/jsPro.html#_3-5-实例对象和原型的关系" class="sidebar-link">3.5 实例对象和原型的关系</a></li><li class="sidebar-sub-header"><a href="/markdown/jsPro.html#_3-6-原型链" class="sidebar-link">3.6 原型链</a></li><li class="sidebar-sub-header"><a href="/markdown/jsPro.html#_3-6-数组的原型链" class="sidebar-link">3.6 数组的原型链</a></li><li class="sidebar-sub-header"><a href="/markdown/jsPro.html#_3-7-原型链不可变" class="sidebar-link">3.7 原型链不可变</a></li><li class="sidebar-sub-header"><a href="/markdown/jsPro.html#_3-8-学生构造函数的标准写法" class="sidebar-link">3.8 学生构造函数的标准写法</a></li><li class="sidebar-sub-header"><a href="/markdown/jsPro.html#_3-add-如何把局部变量变换为全局变量" class="sidebar-link">3.add:如何把局部变量变换为全局变量</a></li></ul></li><li><a href="/markdown/jsPro.html#_4-继承" class="sidebar-link">4 继承</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/markdown/jsPro.html#_4-1-什么是继承-为什么要学继承" class="sidebar-link">4.1 什么是继承 为什么要学继承</a></li><li class="sidebar-sub-header"><a href="/markdown/jsPro.html#_4-3-原型继承法" class="sidebar-link">4.3 原型继承法</a></li><li class="sidebar-sub-header"><a href="/markdown/jsPro.html#_4-4-组合继承" class="sidebar-link">4.4 组合继承</a></li><li class="sidebar-sub-header"><a href="/markdown/jsPro.html#_4-add-关键字在函数中的指向问题" class="sidebar-link">4.add 关键字在函数中的指向问题</a></li></ul></li><li><a href="/markdown/jsPro.html#_5-函数的复习" class="sidebar-link">5 函数的复习</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/markdown/jsPro.html#_5-1-函数的作用域链" class="sidebar-link">5.1 函数的作用域链</a></li><li class="sidebar-sub-header"><a href="/markdown/jsPro.html#_5-2-函数的预解析" class="sidebar-link">5.2 函数的预解析</a></li><li class="sidebar-sub-header"><a href="/markdown/jsPro.html#_5-3-函数的调用和自调用" class="sidebar-link">5.3 函数的调用和自调用</a></li><li class="sidebar-sub-header"><a href="/markdown/jsPro.html#_5-4-隐式全局变量" class="sidebar-link">5.4 隐式全局变量</a></li></ul></li><li><a href="/markdown/jsPro.html#_6-高阶函数" class="sidebar-link">6 高阶函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/markdown/jsPro.html#_6-1-函数也是对象" class="sidebar-link">6.1 函数也是对象</a></li><li class="sidebar-sub-header"><a href="/markdown/jsPro.html#_6-2-call-apply-bind-方法-上下文调用模式" class="sidebar-link">6.2 call apply bind 方法(上下文调用模式)</a></li><li class="sidebar-sub-header"><a href="/markdown/jsPro.html#_6-3-上下文调用模式案例" class="sidebar-link">6.3 上下文调用模式案例</a></li><li class="sidebar-sub-header"><a href="/markdown/jsPro.html#_6-4-回调函数" class="sidebar-link">6.4 回调函数</a></li><li class="sidebar-sub-header"><a href="/markdown/jsPro.html#_6-5-函数作为返回值" class="sidebar-link">6.5 函数作为返回值</a></li></ul></li><li><a href="/markdown/jsPro.html#_7-闭包" class="sidebar-link">7 闭包</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/markdown/jsPro.html#_8-递归" class="sidebar-link">8 递归</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/markdown/jsPro.html#_9-浅拷贝和深拷贝" class="sidebar-link">9 浅拷贝和深拷贝</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/markdown/jsPro.html#_10-正则表达式" class="sidebar-link">10 正则表达式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/markdown/jsPro.html#_10-1-js-中使用正则表达式" class="sidebar-link">10.1 js 中使用正则表达式</a></li><li class="sidebar-sub-header"><a href="/markdown/jsPro.html#_10-2-正则的匹配-提取-替换" class="sidebar-link">10.2 正则的匹配,提取,替换</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="js-高级"><a href="#js-高级" class="header-anchor">#</a> js 高级</h1> <h2 id="_1-面向对象理论部分"><a href="#_1-面向对象理论部分" class="header-anchor">#</a> 1 面向对象理论部分</h2> <h3 id="_1-1-面向过程和面向对象"><a href="#_1-1-面向过程和面向对象" class="header-anchor">#</a> 1.1 面向过程和面向对象</h3> <ul><li>向过程：关注的是过程中的每一步</li> <li>面向对象：关注的是对象能做什么，通过对象编程
<blockquote><p>PS:面向对象不是替代面向过程，而是对过程的高度封装。
####1.2 如何面向对象编程</p></blockquote></li> <li>面向对象编程的概念：
Object Oriented Programming，简称 OOP ，是一种编程开发思想 。它将真实世界各种复杂的关系 ，抽象为一个个对象 ，然后由对象之间的分工与合作，完成对真实世界的模拟。
####1.3 面向对象的好处</li> <li>适合大型项目的开发，提高开发效率</li> <li>易于维护
####1.4 面向对象的特征</li> <li>封装</li> <li>继承</li> <li>多态</li></ul> <h2 id="_2-对象"><a href="#_2-对象" class="header-anchor">#</a> 2 对象</h2> <h3 id="_2-1-自定义构造函数创建对象"><a href="#_2-1-自定义构造函数创建对象" class="header-anchor">#</a> 2.1 自定义构造函数创建对象</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Student</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> gender</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 属性</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
  <span class="token keyword">this</span><span class="token punctuation">.</span>gender <span class="token operator">=</span> gender
  <span class="token comment">// 方法</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">run</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我要奔跑了....'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">sayHi</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我叫'</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">',今年'</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 调用函数创建一个学生对象</span>
<span class="token keyword">var</span> zs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">'张三'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">'男'</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_2-2-构造函数和普通函数的区别"><a href="#_2-2-构造函数和普通函数的区别" class="header-anchor">#</a> 2.2 构造函数和普通函数的区别</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> zs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">'张三'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">'男'</span><span class="token punctuation">)</span> <span class="token comment">// 通过new关键字调用，就是构造函数</span>
<span class="token keyword">var</span> zs <span class="token operator">=</span> <span class="token function">Student</span><span class="token punctuation">(</span><span class="token string">'张三'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">'男'</span><span class="token punctuation">)</span> <span class="token comment">// 没有通过new关键字调用就是普通函数</span>
</code></pre></div><ul><li><p>函数的性质要依据调用的方式决定
####2.3 new 关键字的执行过程</p></li> <li><p>new 关键字的执行过程：</p> <ul><li>向内存申请一块空间，存放对象数据。</li> <li>让 this 关键字指向申请的空间，this 代表了当前创建的对象。</li> <li>通过 this 向内存空间中添加属性和方法</li> <li>构造函数执行完毕后，把内存地址返回给外部接收的变量</li></ul></li> <li><p>对象是一种复杂数据类型</p></li> <li><p>对象存储在内存中</p></li></ul> <h3 id="_2-4-创建对象的案例"><a href="#_2-4-创建对象的案例" class="header-anchor">#</a> 2.4 创建对象的案例</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 每一个学生会自我介绍（叫什么、多大了）、敲代码、唱歌</span>

<span class="token comment">// 构造函数</span>
<span class="token keyword">function</span> <span class="token function">Student</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 属性</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
  <span class="token comment">// 方法：</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">sayHi</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我叫'</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">'，今年'</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">writeCode</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我会前端'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">song</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我会唱歌'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 第一个学生对象</span>
<span class="token keyword">var</span> zs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">'张三'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
<span class="token comment">// 第二个学生对象</span>
<span class="token keyword">var</span> ls <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">'李四'</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>
<span class="token comment">// 第三个学生对象</span>
<span class="token keyword">var</span> ww <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">'王五'</span><span class="token punctuation">,</span> <span class="token number">17</span><span class="token punctuation">)</span>

<span class="token keyword">var</span> zs2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">'张三'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>zs <span class="token operator">===</span> zs2<span class="token punctuation">)</span> <span class="token comment">// false 原因：在内存中的地址是不一样的。</span>
</code></pre></div><h2 id="_3-原型"><a href="#_3-原型" class="header-anchor">#</a> 3 原型</h2> <h3 id="_3-1-为什么要学习原型"><a href="#_3-1-为什么要学习原型" class="header-anchor">#</a> 3.1 为什么要学习原型</h3> <ul><li>2.4 中的代码 从功能上讲没问题，但是存在内存浪费
属性虽然是不一样的，方法是不变的，但是每一个对象中有相同的方法。</li> <li>解决办法：
把方法抽取出来，放入到一个【公共的地方-原型】，让所有同类型的对象共享</li></ul> <h3 id="_3-2-获取和使用原型"><a href="#_3-2-获取和使用原型" class="header-anchor">#</a> 3.2 获取和使用原型</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 每一个学生会自我介绍（叫什么、多大了）、敲代码、唱</span>
<span class="token comment">// 构造函数</span>
<span class="token keyword">function</span> <span class="token function">Student</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 属性</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
  <span class="token comment">// this.type = '学生'</span>
<span class="token punctuation">}</span>

<span class="token comment">// 获取原型：</span>
<span class="token keyword">var</span> yx <span class="token operator">=</span> <span class="token class-name">Student</span><span class="token punctuation">.</span>prototype
<span class="token comment">// 添加：对象.key = value;  对象['key'] = value;</span>
yx<span class="token punctuation">.</span><span class="token function-variable function">sayHi</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我叫'</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">'，今年'</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
yx<span class="token punctuation">.</span><span class="token function-variable function">writeCode</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我会前端'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
yx<span class="token punctuation">.</span><span class="token function-variable function">song</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我会唱歌'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
yx<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">'学生'</span>

<span class="token comment">// 第一个学生对象</span>
<span class="token keyword">var</span> zs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">'张三'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
<span class="token comment">// 第二个学生对象</span>
<span class="token keyword">var</span> ls <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">'李四'</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>
<span class="token comment">// 第三个学生对象</span>
<span class="token keyword">var</span> ww <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">'王五'</span><span class="token punctuation">,</span> <span class="token number">17</span><span class="token punctuation">)</span>

<span class="token comment">// 原型作用：被相关的构造函数Student→ 创建的对象（zs，ls，ww）→ 共享（sayHi、song、writeCode）→ 节省内存</span>
</code></pre></div><h3 id="_3-3-原型的作用"><a href="#_3-3-原型的作用" class="header-anchor">#</a> 3.3 原型的作用</h3> <p>节省内存。 因为原型中存放的成员（属性或方法），都可以被相关的构造函数所创建的对象共享</p> <h3 id="_3-4-实例对象、原型、构造函数、原型链图解"><a href="#_3-4-实例对象、原型、构造函数、原型链图解" class="header-anchor">#</a> 3.4 实例对象、原型、构造函数、原型链图解</h3> <p><img src="/assets/img/tttt1.a67e8230.jpg" alt="t111"></p> <h3 id="_3-5-实例对象和原型的关系"><a href="#_3-5-实例对象和原型的关系" class="header-anchor">#</a> 3.5 实例对象和原型的关系</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'zs'</span>
<span class="token punctuation">}</span>

<span class="token class-name">Student</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>aaa <span class="token operator">=</span> <span class="token number">456</span>

<span class="token comment">// 实例:stu 是通过new Student这个构造函数创建出来的,所以,stu一般被称为是Student这个构造函数的实例</span>
<span class="token keyword">var</span> stu <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
stu<span class="token punctuation">.</span>aaa <span class="token operator">=</span> <span class="token number">123</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stu<span class="token punctuation">.</span>aaa<span class="token punctuation">)</span> <span class="token comment">//实例没有,原型也没有,Object对象里也没有  则返回undefined  注意：不是null</span>
<span class="token comment">//如果实例有这个属性,则直接返回,不会去原型上找了</span>
<span class="token comment">// 如果实例上没有,但是原型上有,则返回原型的结果</span>
</code></pre></div><p>总结: 实例和原型是父子关系,如果要查找实例身上的某个属性,先去实例上面找,如果实例上面没有,才会去原型上面找</p> <h3 id="_3-6-原型链"><a href="#_3-6-原型链" class="header-anchor">#</a> 3.6 原型链</h3> <ul><li>总结: 任何一个对象都是有原型的,所以所有对象都有原型链</li> <li>原型链就是: 对象--&gt;对象的原型--&gt;对象原型的原型--&gt;... --&gt;null;</li> <li>对象属性查找的规则: 先在对象自己身上找,如果找不到则沿着原型链往上找,直到 null<br>
ps：找到 null 时输出为 undefied</li></ul> <h3 id="_3-6-数组的原型链"><a href="#_3-6-数组的原型链" class="header-anchor">#</a> 3.6 数组的原型链</h3> <ul><li>演示</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span> <span class="token comment">// new Array(1,2,3)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//数组原型上的toString方法 把数组转成字符串</span>
</code></pre></div><ul><li>案例：给数组扩展一个计算数字总和的方法。</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 所有的数组,都应该可以调用这个求和的方法</span>
<span class="token comment">// 可以添加到Object的原型上或者到Array的原型上，此案例中应添加到Array原型上</span>

<span class="token comment">// 1. 明确往哪里添加方法</span>
<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getSum</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 2. 里面的代码</span>
  <span class="token comment">// 数组里面有几个值,就应该循环多少次</span>
  <span class="token comment">// 由于这个方法一定是被某一个数组调用的,所以,this一定指向调用函数的那个数组</span>
  <span class="token keyword">var</span> sum <span class="token operator">=</span> <span class="token number">0</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    sum <span class="token operator">+=</span> <span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> sum
<span class="token punctuation">}</span>

<span class="token comment">//小技巧: 给原型添加方法的时候,具体写里面代码之前,先考虑这个方法是被谁调用的</span>
</code></pre></div><h3 id="_3-7-原型链不可变"><a href="#_3-7-原型链不可变" class="header-anchor">#</a> 3.7 原型链不可变</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Student</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
<span class="token punctuation">}</span>

<span class="token keyword">var</span> zs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">'zs'</span><span class="token punctuation">)</span>

<span class="token comment">//注意: 构造函数的原型是由自己的prototype的指向决定的</span>
<span class="token class-name">Student</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
  aaa<span class="token operator">:</span> <span class="token number">123</span><span class="token punctuation">,</span>
  <span class="token comment">// 注意,如果我们自己要把一个自定义对象,赋值给某个函数的prototype,</span>
  <span class="token comment">// 那么最好加上constructor,保证一个完整的三角关系(不加也不影响代码执行,但是最好加上)</span>
  constructor<span class="token operator">:</span> Student
<span class="token punctuation">}</span>

<span class="token keyword">var</span> ls <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">'ls'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>zs<span class="token punctuation">.</span>aaa<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ls<span class="token punctuation">.</span>aaa<span class="token punctuation">)</span>

<span class="token comment">// :</span>
</code></pre></div><p>总结：</p> <ul><li>构造函数的原型是由自己的 prototype 属性决定的</li> <li>实例对象创建出来,实例对象的原型链就固定了,不会随着构造函数原型的变化而变化</li></ul> <h3 id="_3-8-学生构造函数的标准写法"><a href="#_3-8-学生构造函数的标准写法" class="header-anchor">#</a> 3.8 学生构造函数的标准写法</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 以前定义构造函数</span>
<span class="token keyword">function</span> <span class="token function">Student</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> gender</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 属性</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
  <span class="token keyword">this</span><span class="token punctuation">.</span>gender <span class="token operator">=</span> gender
  <span class="token comment">// 方法</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">sayHi</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我叫什么'</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">//this代表的是调用方法的对象</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">writeCode</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我会写code'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 创建对象</span>
<span class="token keyword">var</span> zs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">'张三'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">'男'</span><span class="token punctuation">)</span>
<span class="token comment">// 使用对象</span>
zs<span class="token punctuation">.</span><span class="token function">writeCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">//=============================================================</span>

<span class="token comment">//学习原型之后的优化:</span>
<span class="token comment">//构造函数中原来都写在一起: 特有的,写在构造函数里,共有的写在原型上</span>
<span class="token keyword">function</span> <span class="token function">Student</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> gender</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
  <span class="token keyword">this</span><span class="token punctuation">.</span>gender <span class="token operator">=</span> gender
<span class="token punctuation">}</span>

<span class="token class-name">Student</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayHi</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'大家好,我是'</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token class-name">Student</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">writeCode</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我会写代码'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> zs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">'zs'</span><span class="token punctuation">,</span> <span class="token string">'男'</span><span class="token punctuation">,</span> <span class="token string">'18'</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> lw <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">'老王'</span><span class="token punctuation">,</span> <span class="token string">'男'</span><span class="token punctuation">,</span> <span class="token string">'38'</span><span class="token punctuation">)</span>

zs<span class="token punctuation">.</span><span class="token function">writeCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
lw<span class="token punctuation">.</span><span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>总结:
<ul><li>未来工作中,利用构造函数批量创建对象,使用原型的这种方式</li> <li>若代码比较多,所以会直接给原型赋值为一个新的对象,要注意原型链不可变的问题</li> <li>要记得加 constructor</li></ul></li></ul> <h3 id="_3-add-如何把局部变量变换为全局变量"><a href="#_3-add-如何把局部变量变换为全局变量" class="header-anchor">#</a> 3.add:如何把局部变量变换为全局变量</h3> <p>把局部变量赋值给 window 就可以了</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//页面加载后自调用函数的代码就执行完了</span>
<span class="token punctuation">;</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">win</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token number">10</span> <span class="token comment">//局部变量</span>
  <span class="token comment">//js是一门动态类型的语言,对象没有属性,点了就有了</span>
  win<span class="token punctuation">.</span>num <span class="token operator">=</span> num <span class="token comment">//把num点进了win的对象里，那么win中就有了num变量</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span>
</code></pre></div><h2 id="_4-继承"><a href="#_4-继承" class="header-anchor">#</a> 4 继承</h2> <h3 id="_4-1-什么是继承-为什么要学继承"><a href="#_4-1-什么是继承-为什么要学继承" class="header-anchor">#</a> 4.1 什么是继承 为什么要学继承</h3> <ul><li><p>为什么要学习继承:
由于在工作中,要创建多个构造函数,而这些构造函数之间,可能有很多重复的属性或者是方法如果我们自己一个一个的写,会导致书写代码非常的麻烦,代码量也比较大所以我们需要使用继承来精简我们的代码</p></li> <li><p>什么是继承:
书写代码的一种方法(不光 js 有,很多其他语言中都有)
####4.2 借用构造函数继承法</p></li> <li><p>如果一个构造函数中要继承另一个构造函数的属性,那么我们可以利用：借用构造函数继承法 --&gt; 继承属性的</p></li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//人的构造函数</span>
<span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> gender</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
  <span class="token keyword">this</span><span class="token punctuation">.</span>gender <span class="token operator">=</span> gender
<span class="token punctuation">}</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayhi</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'你好,我是'</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">//借用构造函数继承法:</span>
<span class="token keyword">function</span> <span class="token function">Student</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> gender<span class="token punctuation">,</span> no<span class="token punctuation">,</span> score</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">Person</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> gender<span class="token punctuation">)</span> <span class="token comment">//代码调用的一瞬间 让person里面的this--&gt;指向学生的实例</span>
  <span class="token comment">//call的作用:</span>
  <span class="token comment">// 1. 调用person里面的代码</span>
  <span class="token comment">// 2. 让person里面的this,指向call里面的第一个参数</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>no <span class="token operator">=</span> no
  <span class="token keyword">this</span><span class="token punctuation">.</span>score <span class="token operator">=</span> score
<span class="token punctuation">}</span>
<span class="token class-name">Student</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayhi</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'你好,我是'</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token class-name">Student</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">study</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'正在努力学习'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> zs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">'zs'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">,</span> <span class="token string">'男'</span><span class="token punctuation">,</span> <span class="token number">01</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>zs<span class="token punctuation">)</span>
</code></pre></div><p>案例:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Animate</span><span class="token punctuation">(</span><span class="token parameter">color<span class="token punctuation">,</span> name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>color <span class="token operator">=</span> color
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Dog</span><span class="token punctuation">(</span><span class="token parameter">color<span class="token punctuation">,</span> name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//希望能够继承animate里面的属性</span>
  <span class="token function">Animate</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> color<span class="token punctuation">,</span> name<span class="token punctuation">)</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span>foodType <span class="token operator">=</span> <span class="token string">'吃屎'</span> <span class="token comment">//这是属性  不是方法</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> dog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">'斑点'</span><span class="token punctuation">,</span> <span class="token string">'马冬梅'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dog<span class="token punctuation">)</span>
<span class="token comment">//  加了call的new的执行过程：</span>
<span class="token comment">//  1. 在内存中创建dog实例</span>
<span class="token comment">//  2. 让Dog中的this,指向Dog的实例</span>
<span class="token comment">//  3. 执行Dog里面的代码</span>
<span class="token comment">//  4. 让Animate里面的this指向Dog实例</span>
<span class="token comment">//  5. 让Animate里面的代码执行</span>
<span class="token comment">//  6. Animate里面的代码执行完毕之后,继续执行 this.foodType = '吃屎';</span>
</code></pre></div><p><img src="/assets/img/t31.cac20a89.png" alt="t"></p> <h3 id="_4-3-原型继承法"><a href="#_4-3-原型继承法" class="header-anchor">#</a> 4.3 原型继承法</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//人的构造函数</span>
<span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> gender</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
  <span class="token keyword">this</span><span class="token punctuation">.</span>gender <span class="token operator">=</span> gender
<span class="token punctuation">}</span>

<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayhi</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'你好,我是'</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">//注意:</span>
<span class="token comment">// 借用构造函数继承法,只能继承属性,但是不能继承方法</span>
<span class="token comment">// 所以要继承方法的话,要使用原型继承法</span>

<span class="token keyword">function</span> <span class="token function">Student</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> gender<span class="token punctuation">,</span> no<span class="token punctuation">,</span> score</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//代码调用的一瞬间 让person里面的this--&gt;指向当前实例对象</span>
  <span class="token function">Person</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span> <span class="token comment">//借用构造函数继承法 继承了name属性</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>no <span class="token operator">=</span> no
  <span class="token keyword">this</span><span class="token punctuation">.</span>score <span class="token operator">=</span> score
<span class="token punctuation">}</span>
<span class="token comment">// 原型继承写法:</span>
<span class="token class-name">Student</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//继承Person里的原型  看下方的图</span>
<span class="token class-name">Student</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">study</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 注意: 一定要先原型继承.然后再添加学生特有的方法</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'正在努力学习'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> zs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">'zs'</span><span class="token punctuation">)</span>
zs<span class="token punctuation">.</span><span class="token function">sayhi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//如果调用成功,说明继承方法成功</span>
</code></pre></div><p><img src="/assets/img/0411.4ea40ab0.png" alt="t"></p> <blockquote><p>注意：之所以说下面的两句话,是因为在实际写代码的时候,属性都写在构造函数里, 方法都写在原型上.所以才可以
如此总结: 通常是借用构造函数--&gt;继承属性，原型继承--&gt;继承方法，如果,方法都写在了构造函数里, 直接借用构造函数就可以将属性和方法都继承下来</p></blockquote> <h3 id="_4-4-组合继承"><a href="#_4-4-组合继承" class="header-anchor">#</a> 4.4 组合继承</h3> <p>组合继承: 借用构造函数继承 + 原型继承</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//人的构造函数</span>
<span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> gender</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
  <span class="token keyword">this</span><span class="token punctuation">.</span>gender <span class="token operator">=</span> gender
<span class="token punctuation">}</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayhi</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'你好,我是'</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Student</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> gender<span class="token punctuation">,</span> no<span class="token punctuation">,</span> score</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">Person</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> gender<span class="token punctuation">)</span> <span class="token comment">//借用构造函数继承</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>no <span class="token operator">=</span> no
  <span class="token keyword">this</span><span class="token punctuation">.</span>score <span class="token operator">=</span> score
<span class="token punctuation">}</span>
<span class="token comment">//原型继承，写完原型继承后再写自身的方法</span>
<span class="token class-name">Student</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//当new Person赋值给Student的原型时，发生了什么？看图06-组合继承</span>
<span class="token class-name">Student</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">study</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'正在努力学习'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> ls <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">'ls'</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token string">'女'</span><span class="token punctuation">,</span> <span class="token number">02</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ls<span class="token punctuation">)</span>
ls<span class="token punctuation">.</span><span class="token function">study</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
ls<span class="token punctuation">.</span><span class="token function">sayhi</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_4-add-关键字在函数中的指向问题"><a href="#_4-add-关键字在函数中的指向问题" class="header-anchor">#</a> 4.add 关键字在函数中的指向问题</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// this是函数中的一个关键字</span>

<span class="token comment">//1-普通调用</span>
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//函数定义的时候,函数里面的this指向是不确定的, 只有当函数被调用的时候,才能确定this指向谁</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//普通调用时 fn()就等于window.fn(); 此时this指向的是window</span>

<span class="token comment">//2-方法调用</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
obj<span class="token punctuation">.</span><span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
obj<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//this -&gt; obj</span>

<span class="token comment">//3-事件调用: 事件处理函数中的this -&gt; 事件源</span>
<span class="token comment">// 事件源.on事件名 = fn;</span>

<span class="token comment">//4-定时器中的回调函数中的this</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span> <span class="token comment">//this--&gt;window</span>
<span class="token comment">//在定时器底层封装的时候,调用我们传入的回调函数,也是像普通调用一样,所以也指向window</span>

<span class="token comment">//5-构造函数中的this</span>
<span class="token keyword">var</span> zs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//this --&gt; zs</span>
<span class="token comment">//构造函数中的this,指向我们创建出来的实例对象</span>

<span class="token comment">//上下文调用模式 this--&gt;可以自定义指向</span>
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
<span class="token comment">//此时希望this指向当前arr数组 可以通过call实现</span>
<span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">)</span> <span class="token comment">//只有一个参数时arr可以省略 第一个参数是指当前this要指向的对象，后面就是实参</span>
<span class="token comment">// call的作用  调用前面的函数   让前面函数的this指向call方法中的第一个参数</span>

<span class="token comment">// 判断this的指向的小技巧:</span>
<span class="token comment">// 1. 明确this在哪个函数里面</span>
<span class="token comment">// 2. 判断对应的这个函数是如何调用的</span>
</code></pre></div><h2 id="_5-函数的复习"><a href="#_5-函数的复习" class="header-anchor">#</a> 5 函数的复习</h2> <h3 id="_5-1-函数的作用域链"><a href="#_5-1-函数的作用域链" class="header-anchor">#</a> 5.1 函数的作用域链</h3> <p>函数的作用域链:函数的作用域是在函数定义的时候,确定下来的,跟函数调用无关</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    a <span class="token operator">=</span> <span class="token number">4</span>
  <span class="token punctuation">}</span>
  <span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
</code></pre></div><p><img src="data:image/png;base64,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AEhI8AMAAEBCgh8AAAASEvwAAACQkOAHAACAhAQ/AAAAJCT4AQAAICHBDwAAAAkJfgAAAEhI8AMAAEBCgh8AAAASEvwAAACQkOAHAACAhAQ/AAAAJCT4AQAAICHBDwAAAAkJfgAAAEhI8AMAAEBCgh8AAAASEvwAAACQkOAHAACAhAQ/AAAAJCT4AQAAICHBDwAAAAkJfgAAAEhI8AMAAEBCgh8AAAASEvwAAACQkOAHAACAhAQ/AAAAJCT4AQAAICHBDwAAAAkJfgAAAEhI8AMAAEBCgh8AAAASEvwAAACQkOAHAACAhAQ/AAAAJCT4AQAAICHBDwAAAAkJfgAAAEhI8AMAAEBCgh8AAAASEvwAAACQkOAHAACAhAQ/AAAAJCT4AQAAICHBDwAAAAkJfgAAAEhI8AMAAEBCgh8AAAASEvwAAACQkOAHAACAhAQ/AAAAJCT4AQAAICHBDwAAAAkJfgAAAEhI8AMAAEBCgh8AAAASEvwAAACQkOAHAACAhAQ/AAAAJCT4AQAAICHBDwAAAAkJfgAAAEhI8AMAAEBCgh8AAAASEvwAAACQkOAHAACAhAQ/AAAAJCT4AQAAICHBDwAAAAkJfgAAAEhI8AMAAEBCgh8AAAASEvwAAACQkOAHAACAhAQ/AAAAJCT4AQAAICHBDwAAAAkJfgAAAEhI8AMAAEBCgh8AAAASEvwAAACQkOAHAACAhAQ/AAAAJCT4AQAAICHBDwAAAAkJfgAAAEhI8AMAAEBCgh8AAAASEvwAAACQkOAHAACAhAQ/AAAAJCT4AQAAICHBDwAAAAkJfgAAAEhI8AMAAEBCgh8AAAASEvwAAACQkOAHAACAhAQ/AAAAJCT4AQAAICHBDwAAAAkJfgAAAEhI8AMAAEBCgh8AAAASEvwAAACQkOAHAACAhAQ/AAAAJCT4AQAAICHBDwAAAAkJfgAAAEhI8AMAAEBCgh8AAAASEvwAAACQkOAHAACAhAQ/AAAAJCT4AQAAICHBDwAAAAkJfgAAAEhI8AMAAEBCgh8AAAASEvwAAACQkOAHAACAhAQ/AAAAJCT4AQAAICHBDwAAAAkJfgAAAEhI8AMAAEBCgh8AAAASEvwAAACQkOAHAACAhAQ/AAAAJCT4AQAAICHBDwAAAAkJfgAAAEhI8AMAAEBCgh8AAAASEvwAAACQkOAHAACAhAQ/AAAAJCT4AQAAICHBDwAAAAkJfgAAAEhI8AMAAEBCgh8AAAASEvwAAACQkOAHAACAhAQ/AAAAJCT4AQAAICHBDwAAAAkJfgAAAEhI8AMAAEBCgh8AAAASEvwAAACQkOAHAACAhAQ/AAAAJCT4AQAAICHBDwAAAAkJfgAAAEhI8AMAAEBCgh8AAAASEvwAAACQkOAHAACAhAQ/AAAAJCT4AQAAICHBDwAAAAkJfgAAAEhI8AMAAEBCgh8AAAASEvwAAACQkOAHAACAhAQ/AAAAJCT4AQAAICHBDwAAAAkJfgAAAEhI8AMAAEBCgh8AAAASEvwAAACQkOAHAACAhAQ/AAAAJCT4AQAAICHBDwAAAAkJfgAAAEhI8AMAAEBCgh8AAAASEvwAAACQkOAHAACAhAQ/AAAAJCT4AQAAICHBDwAAAAkJfgAAAEhI8AMAAEBCgh8AAAASEvwAAACQkOAHAACAhAQ/AAAAJCT4AQAAICHBDwAAAAkJfgAAAEhI8AMAAEBCgh8AAAASEvwAAACQkOAHAACAhAQ/AAAAJCT4AQAAICHBDwAAAAkJfgAAAEhI8AMAAEBCgh8AAAASEvwAAACQkOAHAACAhAQ/AAAAJCT4AQAAICHBDwAAAAkJfgAAAEhI8AMAAEBCgh8AAAASEvwAAACQkOAHAACAhAQ/AAAAJCT4AQAAICHBDwAAAAkJfgAAAEhI8AMAAEBCgh8AAAASEvwAAACQkOAHAACAhAQ/AAAAJCT4AQAAICHBDwAAAAkJfgAAAEhI8AMAAEBCgh8AAAASEvwAAACQkOAHAACAhAQ/AAAAJCT4AQAAICHBDwAAAAkJfgAAAEhI8AMAAEBCgh8AAAASEvwAAACQkOAHAACAhAQ/AAAAJCT4AQAAICHBDwAAAAkJfgAAAEhI8AMAAEBCgh8AAAASEvwAAACQkOAHAACAhAQ/AAAAJCT4AQAAICHBDwAAAAkJfgAAAEhI8AMAAEBCgh8AAAASEvwAAACQkOAHAACAhAQ/AAAAJCT4AQAAICHBDwAAAAkJfgAAAEhI8AMAAEBCgh8AAAASEvwAAACQkOAHAACAhAQ/AAAAJCT4AQAAICHBDwAAAAkJfgAAAEhI8AMAAEBCgh8AAAASEvwAAACQkOAHAACAhAQ/AAAAJCT4AQAAICHBDwAAAAkJfgAAAEhI8AMAAEBCgh8AAAASEvwAAACQkOAHAACAhAQ/AAAAJCT4AQAAICHBDwAAAAkJfgAAAEhI8AMAAEBCgh8AAAASEvwAAACQkOAHAACAhAQ/AAAAJCT4AQAAICHBDwAAAAkJfgAAAEhI8AMAAEBCgh8AAAASEvwAAACQkOAHAACAhAQ/AAAAJCT4AQAAICHBDwAAAAkJfgAAAEhI8AMAAEBCgh8AAAASEvwAAACQkOAHAACAdP73v/8DtpflUZNsJLwAAAAASUVORK5CYII=" alt="t"></p> <h3 id="_5-2-函数的预解析"><a href="#_5-2-函数的预解析" class="header-anchor">#</a> 5.2 函数的预解析</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span>
<span class="token keyword">function</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
<span class="token comment">//预解析阶段:先提升变量, 然后提升函数. 如果变量名和函数名重复,则函数覆盖变量</span>
<span class="token comment">//预解析为：</span>
<span class="token keyword">var</span> a
<span class="token keyword">function</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token comment">//代码执行阶段:</span>
a <span class="token operator">=</span> <span class="token number">1</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
</code></pre></div><h3 id="_5-3-函数的调用和自调用"><a href="#_5-3-函数的调用和自调用" class="header-anchor">#</a> 5.3 函数的调用和自调用</h3> <h3 id="_5-4-隐式全局变量"><a href="#_5-4-隐式全局变量" class="header-anchor">#</a> 5.4 隐式全局变量</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span>
  <span class="token keyword">function</span> <span class="token function">son</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    a <span class="token operator">=</span> <span class="token number">2</span> <span class="token comment">//隐式全局 注意: 如果不用var声明变量,有可能会成为全局变量</span>
  <span class="token punctuation">}</span>
  <span class="token function">son</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
</code></pre></div><p><img src="/assets/img/t3.412c59b5.png" alt="t"></p> <h2 id="_6-高阶函数"><a href="#_6-高阶函数" class="header-anchor">#</a> 6 高阶函数</h2> <h3 id="_6-1-函数也是对象"><a href="#_6-1-函数也是对象" class="header-anchor">#</a> 6.1 函数也是对象</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">OuterFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//这是为了看caller写的外层函数</span>
  <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fn<span class="token punctuation">.</span>arguments<span class="token punctuation">)</span> <span class="token comment">//是一个数组,存储了所有的实参</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fn<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">//函数的名字   //fn</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fn<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token comment">//形参的长度  //3</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fn<span class="token punctuation">.</span>caller<span class="token punctuation">)</span> <span class="token comment">//调用者. 注意: 是在哪个函数体里面调用的 对应的外面的函数体</span>
  <span class="token punctuation">}</span>
  <span class="token function">fn</span><span class="token punctuation">(</span><span class="token number">34</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">56</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">OuterFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">//声明一个函数时，底层做的事情:</span>
<span class="token keyword">var</span> fn <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Function</span><span class="token punctuation">(</span><span class="token string">'x'</span><span class="token punctuation">,</span> <span class="token string">'y'</span><span class="token punctuation">,</span> <span class="token string">'console.log(x + y);console.log(x)'</span><span class="token punctuation">)</span>

<span class="token function">fn</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span> <span class="token comment">//对象的形式查看</span>

<span class="token function">fn</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span>

<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token comment">// fn就是Function的实例 那么就一定有一个原型对象</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span> <span class="token comment">//ƒ () { [native code] } 这个是底层实现的看不了里面的具体的逻辑</span>

console<span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>

<span class="token comment">// 注意: Function.prototype身上有call, apply, bind方法</span>
<span class="token comment">// 所有的函数都是new Function() 创建出来的.所以所有的函数都可以调用以上方法</span>
<span class="token comment">// fn.call()</span>
<span class="token comment">// fn.apply()</span>
<span class="token comment">// fn.bind();</span>
</code></pre></div><h3 id="_6-2-call-apply-bind-方法-上下文调用模式"><a href="#_6-2-call-apply-bind-方法-上下文调用模式" class="header-anchor">#</a> 6.2 call apply bind 方法(上下文调用模式)</h3> <ul><li>继承的时候会用到 --&gt;借用构造函数继承使用到了 call</li> <li>在实际开发的过程中,我们需要让函数里的 this,按照我们自己的想法指向</li></ul> <h4 id="_6-21-call-方法"><a href="#_6-21-call-方法" class="header-anchor">#</a> 6.21 call 方法</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// call的使用:</span>
<span class="token comment">// 所以要使用call,需要使用函数实例对象调用</span>
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
<span class="token comment">//注意: 此时的需求,希望函数中的this --&gt; 指向arr数组</span>
<span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>
</code></pre></div><p>小结:(call 需要被函数实例调用)</p> <ul><li><p>call 的作用:</p> <ul><li>调用前面的函数</li> <li>让前面的函数的 this,指向 call 方法中第一个参数</li></ul></li> <li><p>如何传参:</p> <ul><li>第一个参数,就是想要指向的对象</li> <li>后面的参数,按照函数的形参列表传参</li></ul></li> <li><p>注解: + 参数列表: 在形参或实参的位置上,传入多个参数.这些参数用逗号隔开 + 形参列表: 在在形参位置上的参数列表 + 实参列表: 在实参位置上的参数里列表</p></li></ul> <h4 id="_6-22-apply-方法"><a href="#_6-22-apply-方法" class="header-anchor">#</a> 6.22 apply 方法</h4> <ul><li>apply 方法:
<ul><li>调用前面的函数</li></ul></li> <li>如何传参:
<ul><li>第一个参数传入谁,那么前面函数里面的 this 就指向谁</li> <li>第二个参数: 要求必须传入一个数组</li></ul></li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">info<span class="token punctuation">,</span> test</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>info<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>test<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'fn调用'</span><span class="token punctuation">,</span> <span class="token string">'test'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">//此处第二个参数必须是一个数组</span>
</code></pre></div><h4 id="_6-23-bind-方法"><a href="#_6-23-bind-方法" class="header-anchor">#</a> 6.23 bind 方法</h4> <ul><li>bind 方法:
<ul><li>不会调用前面的函数,会根据前面函数,再复制出一个一模一样的新的函数 但是注意: 这个新的函数里面的 this 已经是固定的了</li></ul></li> <li>如何传参:
<ul><li>第一个参数: 传入谁,返回的新的函数中的 this 就固定了指向谁</li> <li>后面的参数: 前面的参数需要什么数据,就按照参数列表的形式传进来即可</li></ul></li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">info<span class="token punctuation">,</span> test</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>info<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>test<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> newfn <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'调用了'</span><span class="token punctuation">,</span> <span class="token string">'test'</span><span class="token punctuation">)</span>
<span class="token function">newfn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//使用bind方法需要手动调用函数</span>
</code></pre></div><ul><li><p>总结</p> <ul><li>call 和 apply 都是可以调用函数的</li> <li>call 和 bind 传参的方法都是一样</li> <li>bind 不会调用函数,而是返回一个新的函数.这个新的函数中 this 是 bind 第一个参数决定</li></ul></li> <li><p>使用场景</p> <ul><li>call 和 apply :
<ul><li>需要改变 this 的指向</li> <li>又需要调用前面的函数里面的代码</li></ul></li> <li>bind:
<ul><li>需要改变的 this 的指向</li> <li>改变的时候,我们不需要调用里面的函数</li></ul></li></ul></li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//bind使用场景</span>
  <span class="token comment">// this--&gt;obj</span>
  <span class="token function">setInterval</span><span class="token punctuation">(</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>info<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token number">1000</span>
  <span class="token punctuation">)</span> <span class="token comment">//bind里的this是fn()函数里的this 指向的是obj对象,通过bind方法将定时器里指向window的this改为指向obj</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  info<span class="token operator">:</span> <span class="token string">'哈哈哈哈,我是卖报的小行家'</span>
<span class="token punctuation">}</span>
obj<span class="token punctuation">.</span>fn <span class="token operator">=</span> fn
obj<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>拓展: bind 一个注意点:</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> newfn <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">//bind传出了一个新的对象  this就指向这个对象了</span>
  a<span class="token operator">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">newfn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//此处bind的使用直接创造了一个新的函数</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// //面试题:</span>
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> newfn <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  a<span class="token operator">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//newfn(); 正常情况下此处应直接调用newfn()，但是面试题刻意为难</span>
<span class="token keyword">new</span> <span class="token class-name">newfn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 不管这个函数是什么,只要new 了,一定指向创建出来的实例.bind创建出来的新的函数也不例外</span>
</code></pre></div><h3 id="_6-3-上下文调用模式案例"><a href="#_6-3-上下文调用模式案例" class="header-anchor">#</a> 6.3 上下文调用模式案例</h3> <ul><li>伪数组借用数组的 push 方法实现增加</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 伪数组: 伪数组其实是个对象,但是有下标,有length属性,看起来像是一个数组</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token number">0</span><span class="token operator">:</span> <span class="token string">'哈哈哈'</span><span class="token punctuation">,</span>
  <span class="token number">1</span><span class="token operator">:</span> <span class="token string">'呵呵呵'</span><span class="token punctuation">,</span>
  <span class="token number">2</span><span class="token operator">:</span> <span class="token string">'嘿嘿嘿'</span><span class="token punctuation">,</span>
  length<span class="token operator">:</span> <span class="token number">3</span>
<span class="token punctuation">}</span>
<span class="token comment">// 1. 要用数组的push方法,先找到这个方法      //push方法是数组中的，数组.push()  伪数组是对象 所以无法直接调用</span>
<span class="token comment">//Array.prototype.push    Array的push方法在原型身上</span>
<span class="token comment">// 2. 经过分析,发现push方法,通过this,获取到要往谁身上添加值</span>
<span class="token comment">// 那么我们通过修改this就可以实现需求</span>
<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'吼吼吼'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
</code></pre></div><ul><li>使用 Math 对象 max 方法取出数组中的最大数字</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span>
<span class="token comment">// 1. Math的max方法就在Math身上</span>
<span class="token comment">// Math.max</span>
<span class="token comment">// 2. 这个方法如何使用</span>
<span class="token comment">// Math.max(1,2,3,4,5)</span>
<span class="token comment">// 3. 我们希望能够调用这个函数,但是要传入的希望是数组.这里也不需要改变this</span>
<span class="token comment">// 跟this无关,就可以随便写,只要把第一个参数的位置占上就可以了.一般写null</span>
<span class="token keyword">var</span> res <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> arr<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
<span class="token comment">// Math.max底层的实现方法，将数组进行遍历比较</span>
<span class="token comment">// function max(){</span>
<span class="token comment">//   for(var i = 0; i &lt; arguments.length; i++){</span>
<span class="token comment">//     比较</span>
<span class="token comment">//   }</span>
<span class="token comment">// }</span>
</code></pre></div><h3 id="_6-4-回调函数"><a href="#_6-4-回调函数" class="header-anchor">#</a> 6.4 回调函数</h3> <ul><li>函数作为函数的参数叫做回调函数(函数可以作为一个参数,传递到另外一个函数里面)</li> <li>回调函数: B 函数当做实参传入到了 A 函数的调用的小括号里,那么 B 就叫做回调函数 回调函数一般命名为 callback</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token constant">A</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token constant">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'B执行了'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token constant">A</span><span class="token punctuation">(</span><span class="token constant">B</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>函数作为返回值案例：</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ie=edge<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
      <span class="token selector">.box</span> <span class="token punctuation">{</span>
        <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
        <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
        <span class="token property">background-color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
        <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>btn<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>按钮<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
      <span class="token comment">//一个简易的动画函数</span>
      <span class="token keyword">function</span> <span class="token function">move</span><span class="token punctuation">(</span><span class="token parameter">element<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//callback一般都是回调函数</span>
        <span class="token comment">//预防多次调用,添加多个定时器的问题</span>
        <span class="token function">clearInterval</span><span class="token punctuation">(</span>element<span class="token punctuation">.</span>timeid<span class="token punctuation">)</span>
        element<span class="token punctuation">.</span>timeid <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">//获取当前的位置</span>
          <span class="token keyword">var</span> currentPos <span class="token operator">=</span> element<span class="token punctuation">.</span>offsetLeft
          <span class="token comment">//判断是否到达目标位置</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>currentPos <span class="token operator">&gt;=</span> <span class="token number">400</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//到达则停止</span>
            <span class="token function">clearInterval</span><span class="token punctuation">(</span>element<span class="token punctuation">.</span>timeid<span class="token punctuation">)</span>
            <span class="token comment">// 需求： 让盒子变成绿色  在这里要执行一段代码, 并且具体的代码根据要求不同,代码不同, 所以这里不能写死</span>
            <span class="token comment">// element.style.backgroundColor = 'green';</span>
            <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
          <span class="token comment">//未到达,则继续前进</span>
          element<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> currentPos <span class="token operator">+</span> <span class="token number">10</span> <span class="token operator">+</span> <span class="token string">'px'</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">var</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#btn'</span><span class="token punctuation">)</span>
      <span class="token keyword">var</span> box <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.box'</span><span class="token punctuation">)</span>

      <span class="token comment">//目前,move函数可以实现,到达400之后,停止的效果</span>
      btn<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">move</span><span class="token punctuation">(</span>box<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          box<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> <span class="token string">'green'</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="_6-5-函数作为返回值"><a href="#_6-5-函数作为返回值" class="header-anchor">#</a> 6.5 函数作为返回值</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token constant">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'哈哈哈'</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 注意:由于这个函数要返回出去,那么在外面一定会用变量接受,所以不需要写函数名. 写了也无法使用</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> fn <span class="token operator">=</span> <span class="token constant">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="_7-闭包"><a href="#_7-闭包" class="header-anchor">#</a> 7 闭包</h2> <p>MDN 概念: 函数和函数作用域的结合
自己的理解:内部函数引用了外部函数的自由变量,内部函数就构成了一个闭包</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">out</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span>
  <span class="token keyword">function</span> <span class="token function">inner</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>工作中用闭包嘛? 用
用闭包干什么?</p> <ul><li>闭包的作用:
<ul><li>私有化数据</li> <li>数据保持(上一次操作的结果,保持住)</li></ul></li> <li>闭包的缺点
普通函数一旦调用,函数的所有数据会加载到栈里面执行,函数执行完毕就会,这些数据就会消失
但是如果出现闭包,里面的函数引用了外面函数的变量,所以导致外面的函数执行完毕了之后,也不能把数据清除掉,那么如果这种情况,比较多的话,可能会导致栈溢出</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> fn <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> money <span class="token operator">=</span> <span class="token number">100</span>

  <span class="token keyword">function</span> <span class="token function">queryMoney</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> money
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">useMoney</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    money <span class="token operator">-=</span> num
    <span class="token keyword">return</span> money
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">addMoney</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    money <span class="token operator">+=</span> num
    <span class="token keyword">return</span> money
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    qm<span class="token operator">:</span> queryMoney<span class="token punctuation">,</span>
    um<span class="token operator">:</span> useMoney<span class="token punctuation">,</span>
    am<span class="token operator">:</span> addMoney
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">var</span> res <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fn<span class="token punctuation">.</span><span class="token function">qm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//查询账户余额</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fn<span class="token punctuation">.</span><span class="token function">um</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//花钱,并且返回余额</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fn<span class="token punctuation">.</span><span class="token function">am</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//充钱,并且返回余额</span>
</code></pre></div><p>闭包经典案例：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ie=edge<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
      <span class="token keyword">var</span> lis <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'li'</span><span class="token punctuation">)</span>

      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> lis<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token punctuation">;</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// var i;</span>
          lis<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>lis<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span>innerText<span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="_8-递归"><a href="#_8-递归" class="header-anchor">#</a> 8 递归</h2> <ul><li>概念：程序调用自身的编程技巧称为递归（ recursion），一般来说，递归需要有==边界条件== 、==递归前进段== 和==递归返回段== 。当边界条件不满足时，递归前进；当边界条件满足时，递归返回。</li> <li>递归的三个阶段：
<ul><li>递归前进段</li> <li>递归边界条件</li> <li>递归返回段</li></ul></li> <li>递归的作用：减少代码量</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 一组有规律的年龄10 、12、14、16、18、20、22、24......，求第n个人的年龄</span>

<span class="token comment">//fn函数,传入第n个数, 返回对应第n个数的值</span>
<span class="token comment">// n:1 --&gt; 10</span>
<span class="token comment">// n: 5: --&gt; 18</span>

<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">10</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// 如果n不是1,那么就需要先知道上一次的值是多少 ,然后在上一次的值的基础上 + 2</span>
    <span class="token keyword">return</span> <span class="token function">fn</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">2</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>

<span class="token comment">//=============================精简的代码-============</span>
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//if分支结构中,如果花括号中只有一行代码,那么花括号可以省略</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">10</span>
  <span class="token keyword">return</span> <span class="token function">fn</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">2</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> res <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
</code></pre></div><ul><li>递归的缺点：有可能造成栈溢出</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token number">0</span>
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">++</span>num<span class="token punctuation">)</span>
  <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 递归的缺点: 有可能造成栈溢出</span>
</code></pre></div><h2 id="_9-浅拷贝和深拷贝"><a href="#_9-浅拷贝和深拷贝" class="header-anchor">#</a> 9 浅拷贝和深拷贝</h2> <ul><li><p>浅拷贝: 如果要拷贝复杂数据类型,只拷贝的是复杂数据类型的地址</p></li> <li><p>浅拷贝的问题: 修改某一个对象的复杂数据类型,会导致其他的对象的数据也发生变化</p></li> <li><p>深拷贝: 如果要拷贝复杂数据类型,不是拷贝的是复杂数据类型的地址,而是把里面的数据,一个一个的拷贝一份</p></li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> wjl <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'老王'</span><span class="token punctuation">,</span>
  age<span class="token operator">:</span> <span class="token number">60</span><span class="token punctuation">,</span>
  cars<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'牛车'</span><span class="token punctuation">,</span> <span class="token string">'马车'</span><span class="token punctuation">,</span> <span class="token string">'驴车'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  houses<span class="token operator">:</span> <span class="token punctuation">{</span>
    bj<span class="token operator">:</span> <span class="token string">'北京顺义别墅'</span><span class="token punctuation">,</span>
    sh<span class="token operator">:</span> <span class="token string">'上海浦东别墅'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> wsc <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'小王'</span><span class="token punctuation">,</span>
  age<span class="token operator">:</span> <span class="token number">30</span>
<span class="token punctuation">}</span>

<span class="token comment">//浅拷贝</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> k <span class="token keyword">in</span> wjl<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>wsc<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    wsc<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> wjl<span class="token punctuation">[</span>k<span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// es6方法实现浅拷贝</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'ls'</span><span class="token punctuation">,</span>
  age<span class="token operator">:</span> <span class="token string">'18'</span><span class="token punctuation">,</span>
  other<span class="token operator">:</span> <span class="token punctuation">{</span>
    name1<span class="token operator">:</span> <span class="token string">'小ls'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span>
b<span class="token punctuation">.</span>other<span class="token punctuation">.</span>name1 <span class="token operator">=</span> <span class="token string">'大ls'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token comment">// 结果均为大ls</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token comment">// 结果均为大ls</span>

<span class="token comment">// JSON转换实现深拷贝</span>

<span class="token comment">//深拷贝: 循环实现</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> k <span class="token keyword">in</span> wjl<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>wsc<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//判断wsc里有没有wjl的内容 没有就是undefined</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>wjl<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 1. 给wsc创建一个数组</span>
      wsc<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
      <span class="token comment">// 2. 遍历这个数组,把里面的值添加到wsc的cars里面</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> key <span class="token keyword">in</span> wjl<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        wsc<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> wjl<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span>key<span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>wjl<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 1. 给wsc创建一个对象</span>
      wsc<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
      <span class="token comment">// 2. 遍历这个对象,把里面的值添加到wsc的cars里面</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> key <span class="token keyword">in</span> wjl<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        wsc<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> wjl<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span>key<span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token comment">//基本数据类型,直接复制值</span>
      wsc<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> wjl<span class="token punctuation">[</span>k<span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//递归实现</span>
<span class="token keyword">function</span> <span class="token function">deepCopy</span><span class="token punctuation">(</span><span class="token parameter">son<span class="token punctuation">,</span> far</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> k <span class="token keyword">in</span> far<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>son<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>far<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        son<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token function">deepCopy</span><span class="token punctuation">(</span>son<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">,</span> far<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>far<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        son<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
        <span class="token function">deepCopy</span><span class="token punctuation">(</span>son<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">,</span> far<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        son<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> far<span class="token punctuation">[</span>k<span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">deepCopy</span><span class="token punctuation">(</span>wsc<span class="token punctuation">,</span> wjl<span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>wsc<span class="token punctuation">)</span>
wsc<span class="token punctuation">.</span>houses<span class="token punctuation">.</span>sh <span class="token operator">=</span> <span class="token keyword">null</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>wjl<span class="token punctuation">)</span>
</code></pre></div><h2 id="_10-正则表达式"><a href="#_10-正则表达式" class="header-anchor">#</a> 10 正则表达式</h2> <ul><li>概念：正则表达式 Regular Expression：，就是定义好一个字符串规则 ，然后根据规则实现对象字符串的匹配、提取、替换等</li> <li>正则表达式的组成
<ul><li>普通字符 abc 123 我爱你</li> <li>特殊字符(元字符、限定符、中括号)：正则表达式中有特殊意义的字符</li></ul></li></ul> <p><a href="http://tool.oschina.net/regex/" target="_blank" rel="noopener noreferrer">在线测试正则<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <ul><li>语法：</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code>  <span class="token comment">//js中正则的使用:</span>
      <span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex">/字符/</span><span class="token punctuation">;</span>
      <span class="token comment">// 在 两个斜杠中间随便写个字符,那么就创建出来一个正则的字面量</span>
      <span class="token comment">// 在js中, js把正则表达式抽象成了一个对象(在js中正则是一个对象的数据类型)</span>

      reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>字符串<span class="token punctuation">)</span> <span class="token comment">// 判断传入的这个字符串,是否符合我们正则的规则,如果符合,则返回true,如果不符合就返回false</span>


      <span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex">/abc/</span><span class="token punctuation">;</span> <span class="token comment">//规则: 只要字符串中有abc连着就行</span>
      <span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex">/111/</span><span class="token punctuation">;</span> <span class="token comment">//规则: 字符串里面要有三个1连着就行</span>

      <span class="token comment">//特殊字符:</span>
      <span class="token comment">// 元字符:</span>
      <span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex">/\d/</span><span class="token punctuation">;</span> <span class="token comment">//规则: 字符串中有数字出现即可</span>
      <span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex">/\D/</span><span class="token punctuation">;</span> <span class="token comment">//规则: 字符串中有非数字出现即可</span>
      <span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex">/\w/</span><span class="token punctuation">;</span> <span class="token comment">//规则: 字符串中有数字或字母,或下划线出现即可</span>
      <span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex">/\W/</span><span class="token punctuation">;</span> <span class="token comment">//规则: 字符串中有非数字或非字母,或非下划线出现即可</span>
      <span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex">/\s/</span><span class="token punctuation">;</span> <span class="token comment">//规则: 字符串中只要有空白符即可</span>
      <span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex">/\S/</span><span class="token punctuation">;</span> <span class="token comment">//规则: 字符串中只要有非空白符即可(可以用空，也可以没有)</span>

      <span class="token comment">// d --&gt; digtal</span>
      <span class="token comment">// w --&gt; word</span>
      <span class="token comment">// s--&gt; space</span>

      <span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex">/./</span><span class="token punctuation">;</span> <span class="token comment">//规则: 字符串中只要有非换行符即可</span>

      <span class="token comment">// 限定符:</span>
      <span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex">/^ab$/</span><span class="token punctuation">;</span> <span class="token comment">//规则: 字符串中只能有ab</span>
      <span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex">/^a/</span><span class="token punctuation">;</span> <span class="token comment">//规则: 字符串中以a开头就行</span>
      <span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex">/c$/</span><span class="token punctuation">;</span> <span class="token comment">//规则: 字符串中以c结尾就行</span>
          <span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex">/^a|c$/</span><span class="token punctuation">;</span> <span class="token comment">//规则: 字符串中以a开头或者以c结尾</span>
      <span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex">/^n+$/</span><span class="token punctuation">;</span> <span class="token comment">//规则: 字符串中以n至少出现一次</span>
      <span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex">/^a*$/</span><span class="token punctuation">;</span> <span class="token comment">//规则: 字符串中以a出现也行,不出现也行</span>
      <span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex">/^a?$/</span><span class="token punctuation">;</span> <span class="token comment">//规则: 字符串中以a可以不出现,但是如果出现只能出现一次</span>

      <span class="token comment">// * 0~多次</span>
      <span class="token comment">// + 1 ~ 多次</span>
      <span class="token comment">// ? 0 ~ 1</span>

      <span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex">/^a{2,}$/</span><span class="token punctuation">;</span> <span class="token comment">//规则: 字符串中a至少出现两次</span>
      <span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex">/^a{2}$/</span><span class="token punctuation">;</span> <span class="token comment">//规则: 字符串中a只能出现两次</span>
      <span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex">/^a{2,5}$/</span><span class="token punctuation">;</span> <span class="token comment">//规则: 字符串中a只能出现两次,最多出现5次</span>

      <span class="token comment">// 中括号 []</span>
      <span class="token comment">// 注意: 一个中括号只占一个字符的位置</span>
      <span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex">/^[abc]23$/</span><span class="token punctuation">;</span> <span class="token comment">//规则: 字符串中可以出现一个字符,这个字符是a|b|c</span>
      <span class="token comment">// 注意:^写在正则的最前面是以什么开头</span>
      <span class="token comment">// 但是如果写在中括号里,就是取反</span>
      <span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex">/^[^abc]23$/</span><span class="token punctuation">;</span> <span class="token comment">//规则: 字符串中第一个字符是除了abc都可以,后面必须是23</span>

      <span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex">/^[0-9]$/</span><span class="token punctuation">;</span> <span class="token comment">//规则: 字符串中可以出现0~9的任意一个数字</span>
      <span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex">/^[a-z]$/</span><span class="token punctuation">;</span> <span class="token comment">//规则: 字符串中可以出现a~z的任意一个字符</span>
      <span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex">/^[A-Z]$/</span><span class="token punctuation">;</span> <span class="token comment">//规则: 字符串中可以出现A~Z的任意一个字符</span>
      <span class="token comment">// js使用的是unicode编码,unicode编码中,</span>
      <span class="token comment">// 大写的字符在前面</span>
      <span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex">/^[A-z]$/</span><span class="token punctuation">;</span> <span class="token comment">//规则: 字符串中可以出现A~z的任意一个字符</span>
      <span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex">/^[\u4e00-\u9fa5]$/</span><span class="token punctuation">;</span> <span class="token comment">//规则: 字符串中出现一个中文</span>

      <span class="token comment">//或模式:</span>
       <span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex">/^a|b|c$/</span><span class="token punctuation">;</span> <span class="token comment">//规则: 字符串中有一个a|ab|abc|b|bc...</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// 分组</span>
      <span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex">/^(abc){3,5}$/</span><span class="token punctuation">;</span> <span class="token comment">//规则: 字符串中有一个abc至少出现3次,最多 出现5次</span>
      <span class="token comment">//注意: 只要是有或模式,一定是从或模式开始,找到最前面,或者是找到最后面</span>
      <span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex">/^abc|def$/</span><span class="token punctuation">;</span> <span class="token comment">//规则:</span>
      <span class="token comment">//注意: 如果或模式出现在分组中那么就把分组中的分成两个部分</span>
      <span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex">/^q(a|b)b$/</span><span class="token punctuation">;</span> <span class="token comment">//规则: 字符串中有第一个字符必须是q, 第二个字符是a|b,第三个字符必须是b</span>
      <span class="token operator">/</span><span class="token operator">^</span><span class="token punctuation">(</span>a<span class="token operator">|</span>b<span class="token punctuation">)</span>$<span class="token operator">/</span> <span class="token operator">==</span><span class="token operator">&gt;</span> <span class="token regex">/^[ab]$/</span>

      <span class="token comment">// 小结: 或模式:</span>
      <span class="token comment">// 1. 如果写在分组外面,就是把整个正则分成两个部分</span>
      <span class="token comment">// 2. 如果写在分组中,就是分组分为两个部分</span>

      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'ab'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


      <span class="token comment">//修饰符:</span>
      <span class="token comment">// i : 正则中的修饰符,代表忽略大小写</span>
      <span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex">/^a$/i</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'A'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// g :  正则中的修饰符,全局查找</span>
      <span class="token comment">// gi两个可以一起写</span>


      <span class="token comment">//转义符: \</span>
      <span class="token comment">// 作用: 可以把普通字符转成特殊字符,也可以把特殊字符转成普通字符</span>

      <span class="token comment">// .本身是特殊字符,除了换行符,其他都能匹配,实际开发中需要匹配普通.,所以利用 \ 把特殊字符 . 转成普通字符串</span>
      <span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex">/^\.$/</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>案例</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//邮箱的规则</span>
<span class="token comment">// @前面一般是用户名 长度大于6 ,小于12</span>
<span class="token comment">// @后面itcast</span>
<span class="token comment">// itcast后面是.</span>
<span class="token comment">// .后面是cn/com</span>

<span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex">/^\w{6,12}@itcast\.(cn|com)$/</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'abc123@itcas.cn'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">//匹配手机号</span>
<span class="token comment">// 13</span>
<span class="token comment">// 18</span>
<span class="token comment">// 15</span>
<span class="token comment">// 17</span>
<span class="token comment">// 19</span>
<span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex">/^1[38697]\d{9}$/</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'18345678901'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_10-1-js-中使用正则表达式"><a href="#_10-1-js-中使用正则表达式" class="header-anchor">#</a> 10.1 js 中使用正则表达式</h3> <ul><li>对象方法创建正则表达式</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">'\\d'</span><span class="token punctuation">,</span> <span class="token string">'g'</span><span class="token punctuation">)</span> <span class="token comment">//注意: 如果用这种方法\d前面一定要记得再加一个\</span>
<span class="token comment">//作用: 把普通字符 \ 和 d 转成特殊字符\d</span>
</code></pre></div><ul><li>字面量或直接量</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex">/\d/g</span>
</code></pre></div><h3 id="_10-2-正则的匹配-提取-替换"><a href="#_10-2-正则的匹配-提取-替换" class="header-anchor">#</a> 10.2 正则的匹配,提取,替换</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//匹配</span>
<span class="token comment">// 正则对象.test(字符串) 返回true/false</span>
<span class="token comment">//提取</span>
<span class="token comment">// 字符串.match(正则) 返回一个数组</span>
<span class="token comment">// 注意: g 就是全局的意思 不写就只能获取第一次匹配的部分,写了返回所有匹配的部分</span>
<span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token string">'ab01c56de9876fg'</span>
<span class="token keyword">var</span> arr <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex">/\d+/g</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>

<span class="token comment">//替换</span>
<span class="token comment">// 字符串.replace(被替换的字符/正则对象, 替换的字符)</span>
<span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token string">'abc!brg!123'</span>
<span class="token keyword">var</span> newStr <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/!/g</span><span class="token punctuation">,</span> <span class="token string">'-'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newStr<span class="token punctuation">)</span>
</code></pre></div><p>案例</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 一组有规律的数字1、1、2、3、5、8、13....，求第n个数字</span>
<span class="token comment">//  这个有规则的数列: 1、1、2、3、5、8、13 叫做斐波那契数列</span>
<span class="token comment">//规律: 第一个值 + 第二个值的和 等于第三个值</span>

<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//边界条件</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">||</span> n <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">1</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">//要想知道当前值,需要知道前面两个值的和</span>
    <span class="token keyword">return</span> <span class="token function">fn</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">fn</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> res <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/git@github.com:claud4816/claud4816.github.io.git/edit/master/markdown/jsPro.md" target="_blank" rel="noopener noreferrer">编辑此页面</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.85a124d9.js" defer></script><script src="/assets/js/4.5f39a6eb.js" defer></script><script src="/assets/js/7.898d1706.js" defer></script>
  </body>
</html>
